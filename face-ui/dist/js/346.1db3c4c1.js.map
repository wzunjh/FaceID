{"version":3,"file":"js/346.1db3c4c1.js","mappings":"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","sources":["webpack://face-id/./src/components/phoneVef/index.vue","webpack://face-id/src/components/phoneVef/index.vue","webpack://face-id/./src/components/phoneVef/index.vue?843f","webpack://face-id/./src/components/phoneVef/index.vue?f178"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.phoneBound)?_c('el-card',{attrs:{\"header\":\"手机核验绑定\"}},[_c('el-form',{ref:\"phoneForm\",attrs:{\"model\":_vm.phoneAuthForm,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"手机号码\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.phoneAuthForm.phone),callback:function ($$v) {_vm.$set(_vm.phoneAuthForm, \"phone\", $$v)},expression:\"phoneAuthForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"验证码\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.phoneAuthForm.code),callback:function ($$v) {_vm.$set(_vm.phoneAuthForm, \"code\", $$v)},expression:\"phoneAuthForm.code\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.phoneCountdown > 0},on:{\"click\":function($event){return _vm.sendCode('phone')}}},[_vm._v(\"发送验证码\"+_vm._s(_vm.phoneCountdown ? `(${_vm.phoneCountdown}s)` : ''))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitPhoneForm('phoneForm')}}},[_vm._v(\"提交核验\")])],1)],1)],1):(!_vm.modifyPhoneVisible)?_c('el-card',{staticClass:\"mb-4\",attrs:{\"header\":\"手机号绑定成功\"}},[_c('el-alert',{attrs:{\"title\":\"手机号绑定成功\",\"type\":\"success\",\"center\":\"\",\"show-icon\":\"\"}}),_c('el-descriptions',{attrs:{\"title\":\"您的绑定信息\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户ID\"}},[_vm._v(_vm._s(_vm.phoneData.fid))]),_c('el-descriptions-item',{attrs:{\"label\":\"绑定手机号码\"}},[_vm._v(_vm._s(_vm.phoneData.phone))]),_c('el-descriptions-item',{attrs:{\"label\":\"绑定状态\"}},[_c('el-tag',{attrs:{\"size\":\"small\"}},[_vm._v(\"已绑定\")])],1)],1),_c('div',{staticClass:\"d-flex justify-content-center\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showModifyPhoneForm}},[_vm._v(\"修改手机号\")])],1)],1):(_vm.modifyPhoneStep === 1)?_c('el-card',{attrs:{\"header\":\"修改手机号绑定\"}},[_c('el-form',{ref:\"modifyPhoneForm\",attrs:{\"model\":_vm.modifyPhoneForm,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"验证方式\",\"prop\":\"verifyType\"}},[_c('el-radio-group',{model:{value:(_vm.modifyPhoneForm.verifyType),callback:function ($$v) {_vm.$set(_vm.modifyPhoneForm, \"verifyType\", $$v)},expression:\"modifyPhoneForm.verifyType\"}},[_c('el-radio',{attrs:{\"label\":\"phone\"}},[_vm._v(\"原手机号验证\")]),_c('el-radio',{attrs:{\"label\":\"apikey\"}},[_vm._v(\"API Key 验证\")])],1)],1),(_vm.modifyPhoneForm.verifyType === 'phone')?[_c('el-form-item',{attrs:{\"label\":\"原手机号码\",\"prop\":\"oldPhone\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"disabled\":\"\"},model:{value:(_vm.modifyPhoneForm.oldPhone),callback:function ($$v) {_vm.$set(_vm.modifyPhoneForm, \"oldPhone\", $$v)},expression:\"modifyPhoneForm.oldPhone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"验证码\",\"prop\":\"oldCode\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modifyPhoneForm.oldCode),callback:function ($$v) {_vm.$set(_vm.modifyPhoneForm, \"oldCode\", $$v)},expression:\"modifyPhoneForm.oldCode\"}}),_c('el-button',{attrs:{\"disabled\":_vm.oldPhoneCountdown > 0},on:{\"click\":function($event){return _vm.sendCode('old')}}},[_vm._v(\"发送验证码\"+_vm._s(_vm.oldPhoneCountdown ? `(${_vm.oldPhoneCountdown}s)` : ''))])],1)]:(_vm.modifyPhoneForm.verifyType === 'apikey')?[_c('el-form-item',{attrs:{\"label\":\"API Key\",\"prop\":\"apiKey\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modifyPhoneForm.apiKey),callback:function ($$v) {_vm.$set(_vm.modifyPhoneForm, \"apiKey\", $$v)},expression:\"modifyPhoneForm.apiKey\"}})],1)]:_vm._e(),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitVerification('modifyPhoneForm')}}},[_vm._v(\"提交验证\")])],1)],2)],1):(_vm.modifyPhoneStep === 2)?_c('el-card',{attrs:{\"header\":\"修改手机号绑定\"}},[_c('el-form',{ref:\"modifyPhoneForm\",attrs:{\"model\":_vm.modifyPhoneForm,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"新手机号码\",\"prop\":\"newPhone\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modifyPhoneForm.newPhone),callback:function ($$v) {_vm.$set(_vm.modifyPhoneForm, \"newPhone\", $$v)},expression:\"modifyPhoneForm.newPhone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"验证码\",\"prop\":\"newCode\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modifyPhoneForm.newCode),callback:function ($$v) {_vm.$set(_vm.modifyPhoneForm, \"newCode\", $$v)},expression:\"modifyPhoneForm.newCode\"}}),_c('el-button',{attrs:{\"disabled\":_vm.newPhoneCountdown > 0},on:{\"click\":function($event){return _vm.sendCode('new')}}},[_vm._v(\"发送验证码\"+_vm._s(_vm.newPhoneCountdown ? `(${_vm.newPhoneCountdown}s)` : ''))])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitNewPhoneForm('modifyPhoneForm')}}},[_vm._v(\"提交修改\")])],1)],1)],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card v-if=\"!phoneBound\" header=\"手机核验绑定\">\r\n      <el-form ref=\"phoneForm\" :model=\"phoneAuthForm\" label-width=\"120px\">\r\n        <el-form-item label=\"手机号码\" prop=\"phone\">\r\n          <el-input v-model=\"phoneAuthForm.phone\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"验证码\" prop=\"code\">\r\n          <el-input v-model=\"phoneAuthForm.code\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button @click=\"sendCode('phone')\" :disabled=\"phoneCountdown > 0\">发送验证码{{phoneCountdown ? `(${phoneCountdown}s)` : ''}}</el-button>\r\n          <el-button type=\"primary\" @click=\"submitPhoneForm('phoneForm')\">提交核验</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <el-card v-else-if=\"!modifyPhoneVisible\" header=\"手机号绑定成功\" class=\"mb-4\">\r\n      <el-alert title=\"手机号绑定成功\" type=\"success\" center show-icon />\r\n      <el-descriptions title=\"您的绑定信息\">\r\n        <el-descriptions-item label=\"用户ID\">{{ phoneData.fid }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"绑定手机号码\">{{ phoneData.phone }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"绑定状态\">\r\n          <el-tag size=\"small\">已绑定</el-tag>\r\n        </el-descriptions-item>\r\n      </el-descriptions>\r\n      <div class=\"d-flex justify-content-center\">\r\n        <el-button type=\"primary\" @click=\"showModifyPhoneForm\">修改手机号</el-button>\r\n      </div>\r\n    </el-card>\r\n\r\n    <el-card v-else-if=\"modifyPhoneStep === 1\" header=\"修改手机号绑定\">\r\n      <el-form ref=\"modifyPhoneForm\" :model=\"modifyPhoneForm\" label-width=\"120px\">\r\n        <el-form-item label=\"验证方式\" prop=\"verifyType\">\r\n          <el-radio-group v-model=\"modifyPhoneForm.verifyType\">\r\n            <el-radio label=\"phone\">原手机号验证</el-radio>\r\n            <el-radio label=\"apikey\">API Key 验证</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <template v-if=\"modifyPhoneForm.verifyType === 'phone'\">\r\n          <el-form-item label=\"原手机号码\" prop=\"oldPhone\">\r\n            <el-input v-model=\"modifyPhoneForm.oldPhone\" clearable disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"验证码\" prop=\"oldCode\">\r\n            <el-input v-model=\"modifyPhoneForm.oldCode\" clearable></el-input>\r\n            <el-button @click=\"sendCode('old')\" :disabled=\"oldPhoneCountdown > 0\">发送验证码{{oldPhoneCountdown ? `(${oldPhoneCountdown}s)` : ''}}</el-button>\r\n          </el-form-item>\r\n        </template>\r\n        <template v-else-if=\"modifyPhoneForm.verifyType === 'apikey'\">\r\n          <el-form-item label=\"API Key\" prop=\"apiKey\">\r\n            <el-input v-model=\"modifyPhoneForm.apiKey\" clearable></el-input>\r\n          </el-form-item>\r\n        </template>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitVerification('modifyPhoneForm')\">提交验证</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <el-card v-else-if=\"modifyPhoneStep === 2\" header=\"修改手机号绑定\">\r\n      <el-form ref=\"modifyPhoneForm\" :model=\"modifyPhoneForm\" label-width=\"120px\">\r\n        <el-form-item label=\"新手机号码\" prop=\"newPhone\">\r\n          <el-input v-model=\"modifyPhoneForm.newPhone\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"验证码\" prop=\"newCode\">\r\n          <el-input v-model=\"modifyPhoneForm.newCode\" clearable></el-input>\r\n          <el-button @click=\"sendCode('new')\" :disabled=\"newPhoneCountdown > 0\">发送验证码{{newPhoneCountdown ? `(${newPhoneCountdown}s)` : ''}}</el-button>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitNewPhoneForm('modifyPhoneForm')\">提交修改</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      phoneAuthForm: {\r\n        phone: '',\r\n        code: '',\r\n        fid: ''\r\n      },\r\n      modifyPhoneForm: {\r\n        verifyType: 'phone',\r\n        oldPhone: '',\r\n        oldCode: '',\r\n        apiKey: '',\r\n        newPhone: '',\r\n        newCode: ''\r\n      },\r\n      phoneBound: false,\r\n      phoneData: { fid: '', phone: '' },\r\n      phoneCountdown: 0,\r\n      oldPhoneCountdown: 0,\r\n      newPhoneCountdown: 0,\r\n      modifyPhoneVisible: false,\r\n      modifyPhoneStep: 1\r\n    };\r\n  },\r\n  mounted() {\r\n    this.phoneAuthForm.fid = localStorage.getItem('user_id');\r\n    this.checkPhoneBinding();\r\n  },\r\n  methods: {\r\n    checkPhoneBinding() {\r\n      this.$http.get(`/face/SmsC/${this.phoneAuthForm.fid}`).then(response => {\r\n        if (response.data.code === 200) {\r\n          this.phoneBound = true;\r\n          this.phoneData.phone = response.data.phone;\r\n          this.phoneData.fid = response.data.fid;\r\n          this.modifyPhoneForm.oldPhone = response.data.phone;\r\n        }\r\n      }).catch(error => {\r\n        console.error('Error checking phone binding:', error);\r\n      });\r\n    },\r\n    sendCode(type) {\r\n      let countdown = 0;\r\n      switch (type) {\r\n        case 'phone':\r\n          countdown = this.phoneCountdown;\r\n          break;\r\n        case 'old':\r\n          countdown = this.oldPhoneCountdown;\r\n          break;\r\n        case 'new':\r\n          countdown = this.newPhoneCountdown;\r\n          break;\r\n      }\r\n      if (countdown > 0) return;\r\n      countdown = 60;\r\n      let interval = setInterval(() => {\r\n        countdown--;\r\n        if (countdown === 0) clearInterval(interval);\r\n        switch (type) {\r\n          case 'phone':\r\n            this.phoneCountdown = countdown;\r\n            break;\r\n          case 'old':\r\n            this.oldPhoneCountdown = countdown;\r\n            break;\r\n          case 'new':\r\n            this.newPhoneCountdown = countdown;\r\n            break;\r\n        }\r\n      }, 1000);\r\n\r\n      let phone = '';\r\n      switch (type) {\r\n        case 'phone':\r\n          phone = this.phoneAuthForm.phone;\r\n          break;\r\n        case 'old':\r\n          phone = this.modifyPhoneForm.oldPhone;\r\n          break;\r\n        case 'new':\r\n          if (!/^1\\d{10}$/.test(this.modifyPhoneForm.newPhone)) {\r\n            alert('非法手机号');\r\n            return;\r\n          }\r\n          phone = this.modifyPhoneForm.newPhone;\r\n          break;\r\n      }\r\n      this.$http.get('/face/Sms', { params: { phone: phone } })\r\n          .then(response => {\r\n            alert(response.data.msg);\r\n          }).catch(error => {\r\n        console.error('Failed to send code:', error);\r\n      });\r\n    },\r\n    submitPhoneForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.$http.get('/face/SmsVef', {\r\n            params: {\r\n              fid: this.phoneAuthForm.fid,\r\n              phone: this.phoneAuthForm.phone,\r\n              code: this.phoneAuthForm.code\r\n            }\r\n          }).then(response => {\r\n            if (response.data.code === 200) {\r\n              this.phoneBound = true;\r\n              this.checkPhoneBinding();\r\n            } else {\r\n              alert(response.data.msg);\r\n            }\r\n          }).catch(error => {\r\n            console.error('Phone verification failed:', error);\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    showModifyPhoneForm() {\r\n      this.modifyPhoneVisible = true;\r\n      this.modifyPhoneStep = 1;\r\n    },\r\n    submitVerification(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          if (this.modifyPhoneForm.verifyType === 'phone') {\r\n            this.$http.get('/face/SmsVef', {\r\n              params: {\r\n                fid: this.phoneAuthForm.fid,\r\n                phone: this.modifyPhoneForm.oldPhone,\r\n                code: this.modifyPhoneForm.oldCode\r\n              }\r\n            }).then(response => {\r\n              if (response.data.code === 200) {\r\n                this.modifyPhoneStep = 2;\r\n              } else {\r\n                alert(response.data.msg);\r\n              }\r\n            }).catch(error => {\r\n              console.error('Old phone verification failed:', error);\r\n            });\r\n          } else if (this.modifyPhoneForm.verifyType === 'apikey') {\r\n            this.$http.get('/face/log/vef', {\r\n              params: {\r\n                fid: this.phoneAuthForm.fid,\r\n                Auth: this.modifyPhoneForm.apiKey\r\n              }\r\n            }).then(response => {\r\n              if (response.data.code === 200) {\r\n                this.modifyPhoneStep = 2;\r\n              } else {\r\n                alert(response.data.msg);\r\n              }\r\n            }).catch(error => {\r\n              console.error('API key verification failed:', error);\r\n            });\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    submitNewPhoneForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.$http.get('/face/SmsVef', {\r\n            params: {\r\n              fid: this.phoneAuthForm.fid,\r\n              phone: this.modifyPhoneForm.newPhone,\r\n              code: this.modifyPhoneForm.newCode\r\n            }\r\n          }).then(response => {\r\n            if (response.data.code === 200) {\r\n              this.phoneBound = true;\r\n              this.checkPhoneBinding();\r\n              this.modifyPhoneVisible = false;\r\n              this.modifyPhoneStep = 1;\r\n            } else {\r\n              alert(response.data.msg);\r\n            }\r\n          }).catch(error => {\r\n            console.error('New phone verification failed:', error);\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.center-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n\r\n.mb-4 {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.d-flex {\r\n  display: flex;\r\n}\r\n\r\n.justify-content-center {\r\n  justify-content: center;\r\n}\r\n\r\n.success-message {\r\n  color: green;\r\n  padding: 20px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 5px;\r\n  text-align: center;\r\n}\r\n\r\n.success-message p {\r\n  margin: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b59337d2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=b59337d2&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b59337d2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","phoneBound","modifyPhoneVisible","modifyPhoneStep","attrs","ref","modifyPhoneForm","model","value","verifyType","callback","$$v","$set","expression","_v","oldPhone","oldCode","oldPhoneCountdown","on","$event","sendCode","_s","apiKey","_e","submitVerification","newPhone","newCode","newPhoneCountdown","submitNewPhoneForm","staticClass","phoneData","fid","phone","showModifyPhoneForm","phoneAuthForm","code","phoneCountdown","submitPhoneForm","staticRenderFns","data","mounted","methods","checkPhoneBinding","console","type","countdown","alert","params","then","formName","Auth","component"],"sourceRoot":""}