{"version":3,"file":"js/25.8ed7d1b1.js","mappings":"2JAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,KAAK,CAACG,YAAY,CAAC,YAAY,SAAS,CAACL,EAAIM,GAAG,mBAAoBN,EAAIO,MAAOL,EAAG,IAAI,CAACG,YAAY,CAAC,YAAY,SAAS,CAACL,EAAIM,GAAGN,EAAIQ,GAAGR,EAAIO,UAAWP,EAAIS,gBAAiBP,EAAG,MAAM,CAACQ,YAAY,iBAAiB,CAACR,EAAG,MAAM,CAACQ,YAAY,cAAcV,EAAIW,GAAIX,EAAIY,IAAIC,MAAM,KAAK,SAASC,GAAO,OAAOZ,EAAG,MAAM,CAACa,IAAID,EAAMJ,YAAY,YAAYL,YAAY,CAAC,YAAY,OAAO,MAAQ,OAAO,OAAS,OAAO,cAAc,SAAS,CAACL,EAAIM,GAAGN,EAAIQ,GAAGM,KAAU,IAAE,GAAGZ,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACR,EAAG,cAAc,CAACE,MAAM,CAAC,WAAcJ,EAAIgB,kBAAoB,GAAM,IAAI,aAAY,EAAM,eAAe,GAAG,MAAQ,aAAad,EAAG,MAAM,CAACQ,YAAY,iBAAiBL,YAAY,CAAC,YAAY,OAAO,cAAc,OAAO,MAAQ,YAAY,CAACL,EAAIM,GAAG,WAAWN,EAAIQ,GAAGR,EAAIgB,mBAAmB,eAAe,KAAKd,EAAG,MAAM,CAACG,YAAY,CAAC,YAAY,SAAS,CAACL,EAAIM,GAAG,mBAC77B,EACGW,EAAkB,G,8BCmBtB,SACAC,KAAAA,UACAC,WAAAA,CACA,0BAEAC,KALA,WAMA,OACAR,IAAAA,GACAI,kBAAAA,EACAK,WAAAA,KACAd,MAAAA,KACAE,iBAAAA,EAEA,EACAa,QAdA,WAeA,2BACA,gBACA,8CACA,EACAC,cAnBA,WAoBAC,cAAAA,KAAAA,WACA,EACAC,QAAAA,CACAC,oBADA,WACA,WACA,kCACA,0CACAC,MAAA,YACA,mCACA,IAHA,UAIA,YACAC,QAAAA,MAAAA,GACA,2BACA,GACA,EACAC,SAZA,WAYA,WACA,kCACA,sCACAC,OAAAA,CAAAA,IAEAH,MAAA,YACA,iBACA,6CACA,YACA,IAPA,UAQA,YACAC,QAAAA,MAAAA,GACA,2BACA,GACA,ICrE8P,I,cCQ1PG,GAAY,OACd,EACAhC,EACAkB,GACA,EACA,KACA,KACA,MAIF,QAAec,EAAiB,O","sources":["webpack://face-id/./src/components/otp/index.vue","webpack://face-id/src/components/otp/index.vue","webpack://face-id/./src/components/otp/index.vue?0e9e","webpack://face-id/./src/components/otp/index.vue?f517"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',{staticStyle:{\"font-size\":\"48px\"}},[_vm._v(\"OTP Generator\")]),(_vm.error)?_c('p',{staticStyle:{\"font-size\":\"24px\"}},[_vm._v(_vm._s(_vm.error))]):(_vm.isAuthenticated)?_c('div',{staticClass:\"otp-container\"},[_c('div',{staticClass:\"otp-digits\"},_vm._l((_vm.otp.split('')),function(digit){return _c('div',{key:digit,staticClass:\"otp-digit\",staticStyle:{\"font-size\":\"48px\",\"width\":\"80px\",\"height\":\"80px\",\"line-height\":\"80px\"}},[_vm._v(_vm._s(digit))])}),0),_c('div',{staticClass:\"countdown\"},[_c('el-progress',{attrs:{\"percentage\":(_vm.expirationSeconds / 30) * 100,\"show-text\":false,\"stroke-width\":24,\"color\":\"#67C23A\"}}),_c('div',{staticClass:\"countdown-text\",staticStyle:{\"font-size\":\"24px\",\"font-weight\":\"bold\",\"color\":\"#67C23A\"}},[_vm._v(\"剩余有效时间: \"+_vm._s(_vm.expirationSeconds)+\" seconds\")])],1)]):_c('div',{staticStyle:{\"font-size\":\"24px\"}},[_vm._v(\"未认证,无法使用 OTP\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"app\">\r\n    <h1 style=\"font-size: 48px;\">OTP Generator</h1>\r\n    <p v-if=\"error\" style=\"font-size: 24px;\">{{ error }}</p>\r\n    <div v-else-if=\"isAuthenticated\" class=\"otp-container\">\r\n      <div class=\"otp-digits\">\r\n        <div class=\"otp-digit\" v-for=\"digit in otp.split('')\" :key=\"digit\" style=\"font-size: 48px; width: 80px; height: 80px; line-height: 80px;\">{{ digit }}</div>\r\n      </div>\r\n      <div class=\"countdown\">\r\n        <el-progress :percentage=\"(expirationSeconds / 30) * 100\" :show-text=\"false\" :stroke-width=\"24\" color=\"#67C23A\" />\r\n        <div class=\"countdown-text\" style=\"font-size: 24px; font-weight: bold; color: #67C23A;\">剩余有效时间: {{ expirationSeconds }} seconds</div>\r\n      </div>\r\n    </div>\r\n    <div v-else style=\"font-size: 24px;\">未认证,无法使用 OTP</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { Progress } from 'element-ui';\r\n\r\nexport default {\r\n  name: 'OtpPage',\r\n  components: {\r\n    'el-progress': Progress\r\n  },\r\n  data() {\r\n    return {\r\n      otp: '',\r\n      expirationSeconds: 0,\r\n      intervalId: null,\r\n      error: null,\r\n      isAuthenticated: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.checkAuthentication();\r\n    this.fetchOtp();\r\n    this.intervalId = setInterval(this.fetchOtp, 1000);\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.intervalId);\r\n  },\r\n  methods: {\r\n    checkAuthentication() {\r\n      const fid = localStorage.getItem('user_id');\r\n      this.$http.get(`/face/orAuth/${fid}`)\r\n          .then(response => {\r\n            this.isAuthenticated = response.data.code === 200;\r\n          })\r\n          .catch(error => {\r\n            console.error(error);\r\n            this.error = error.response.data.msg;\r\n          });\r\n    },\r\n    fetchOtp() {\r\n      const fid = localStorage.getItem('user_id');\r\n      this.$http.get(`/mfa/otp/${fid}`, {\r\n        params: {}\r\n      })\r\n          .then(response => {\r\n            this.otp = response.data.otp;\r\n            this.expirationSeconds = response.data.expirationSeconds;\r\n            this.error = null;\r\n          })\r\n          .catch(error => {\r\n            console.error(error);\r\n            this.error = error.response.data.msg;\r\n          });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n\r\n.otp-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 40px;\r\n}\r\n\r\n.otp-digits {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.otp-digit {\r\n  font-size: 36px;\r\n  font-weight: bold;\r\n  width: 50px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  margin: 0 5px;\r\n}\r\n\r\n.countdown {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.countdown-text {\r\n  margin-top: 10px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0b86d108&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0b86d108&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticStyle","_v","error","_s","isAuthenticated","staticClass","_l","otp","split","digit","key","expirationSeconds","staticRenderFns","name","components","data","intervalId","mounted","beforeDestroy","clearInterval","methods","checkAuthentication","then","console","fetchOtp","params","component"],"sourceRoot":""}