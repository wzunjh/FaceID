"use strict";(self["webpackChunkface_id"]=self["webpackChunkface_id"]||[]).push([[469],{44469:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var o=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{attrs:{header:"API信息中心"}},[t("el-descriptions",{attrs:{title:"接口请求地址",border:""}},[t("el-descriptions-item",{attrs:{label:"URL"}},[e._v(e._s(e.apiBaseUrl))]),t("el-descriptions-item",{attrs:{label:"请求方式"}},[e._v("post")])],1),t("div",{staticClass:"api-key-container"},[e.apiKey?t("el-descriptions",{attrs:{title:"API Key 信息 (请妥善保管好,必要时及时修改或者设置IP白名单)",border:""}},[t("el-descriptions-item",{staticClass:"key-item",attrs:{label:"当前为"}},[e._v(" "+e._s(e.apiKey)+" "),t("el-button",{attrs:{icon:"el-icon-copy-document",type:"text"},on:{click:e.copyApiKey}},[e._v("复制")])],1),t("el-descriptions-item",{staticClass:"num-item",attrs:{label:"累计使用次数(调用接口次数)"}},[e._v(e._s(e.apiNum))]),t("el-descriptions-item",{staticClass:"time-item",attrs:{label:"最新使用时间(一键登录与远程接口调用)"}},[e._v(e._s(e.apiTime))]),t("el-descriptions-item",{staticClass:"num-item",attrs:{label:"接口每分钟请求限制次数"}},[e._v(e._s(e.apiMin)+"次/每分钟")])],1):t("el-alert",{attrs:{title:"您没有可用的ApiKey",type:"error","show-icon":""}}),t("el-popconfirm",{attrs:{title:"Are you sure you want to update the API key?","confirm-button-text":"Yes, update it","cancel-button-text":"Cancel"},on:{confirm:e.showPhoneVerification},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{attrs:{type:"primary"}},[e._v("新建/更新ApiKey")])]},proxy:!0}])})],1),t("el-card",[t("el-descriptions",{attrs:{title:"请求体格式说明",border:""}},[t("el-descriptions-item",{attrs:{label:"Body 类型",span:3}},[e._v("multipart/form-data")]),t("el-descriptions-item",{attrs:{label:"参数名"}},[e._v("AuthToken")]),t("el-descriptions-item",{attrs:{label:"参数值"}},[e._v("Auth-123adc456efg789hij")]),t("el-descriptions-item",{attrs:{label:"参数类型"}},[e._v("string")]),t("el-descriptions-item",{attrs:{label:"参数名"}},[e._v("image1")]),t("el-descriptions-item",{attrs:{label:"参数值"}},[e._v("test1.jpg")]),t("el-descriptions-item",{attrs:{label:"参数类型"}},[e._v("file")]),t("el-descriptions-item",{attrs:{label:"参数名"}},[e._v("image2")]),t("el-descriptions-item",{attrs:{label:"参数值"}},[e._v("test2.jpg")]),t("el-descriptions-item",{attrs:{label:"参数类型"}},[e._v("file")])],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"操作消息",width:"30%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v(e._s(e.msg))])]),t("el-dialog",{attrs:{visible:e.phoneVerificationVisible,title:"手机号验证",width:"30%",center:""},on:{"update:visible":function(t){e.phoneVerificationVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:function(t){e.phoneVerificationVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.verifyPhone}},[e._v("验证")])]},proxy:!0}])},[t("el-form",{ref:"phoneAuthForm",attrs:{model:e.phoneAuthForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{disabled:""},model:{value:e.phoneAuthForm.phone,callback:function(t){e.$set(e.phoneAuthForm,"phone",t)},expression:"phoneAuthForm.phone"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-input",{model:{value:e.phoneAuthForm.code,callback:function(t){e.$set(e.phoneAuthForm,"code",t)},expression:"phoneAuthForm.code"}}),t("el-button",{attrs:{disabled:e.phoneCountdown>0},on:{click:function(t){return e.sendCode("phone")}}},[e._v(" "+e._s(e.phoneCountdown>0?"".concat(e.phoneCountdown,"s"):"发送验证码")+" ")])],1)],1)],1)],1)},a=[];i(32564);const n={data:function(){return{apiKey:null,apiNum:0,apiMin:3,apiTime:"",apiBaseUrl:"接口一: http://localhost:8868/api/vef (两张直接对比)   接口二: http://localhost:8868/api/vefone (单张image1对比自建人脸库)",msg:"",dialogVisible:!1,phoneAuthForm:{phone:"",code:"",fid:""},phoneData:{fid:"",phone:""},phoneCountdown:0,phoneVerificationVisible:!1}},mounted:function(){this.fetchApiKey(),this.checkPhoneBinding()},methods:{fetchApiKey:function(){var e=this,t=localStorage.getItem("user_id");this.$http.get("/face/apiKey/".concat(t)).then((function(t){200===t.data.code?(e.apiKey=t.data.apiKey,e.apiNum=t.data.apiNum,e.apiMin=t.data.apiMin,e.apiTime=t.data.apiTime,t.data.msg&&(e.msg=t.data.msg,e.dialogVisible=!0,setTimeout((function(){e.dialogVisible=!1}),700))):(e.apiKey=null,e.apiNum=0,e.apiMin=3,e.apiTime="")}))["catch"]((function(t){console.error("Error fetching API key:",t),e.apiKey=null,e.apiNum=0,e.apiMin=3,e.apiTime=""}))},showPhoneVerification:function(){var e=this,t=localStorage.getItem("user_id");this.phoneAuthForm.fid=t,this.$http.get("/face/SmsC/".concat(t)).then((function(t){200===t.data.code&&(e.phoneData.phone=t.data.phone,e.phoneData.fid=t.data.fid,e.phoneAuthForm.phone=e.phoneData.phone,e.phoneVerificationVisible=!0)}))["catch"]((function(e){console.error("Error checking phone binding:",e)}))},verifyPhone:function(){var e=this;this.$http.get("/face/SmsVef",{params:{fid:this.phoneAuthForm.fid,phone:this.phoneAuthForm.phone,code:this.phoneAuthForm.code}}).then((function(t){200===t.data.code?(e.phoneVerificationVisible=!1,e.updateApiKey()):alert(t.data.msg)}))["catch"]((function(e){console.error("Phone verification failed:",e)}))},updateApiKey:function(){var e=this,t=localStorage.getItem("user_id");this.$http.get("/face/updateApiKey/".concat(t)).then((function(t){200===t.data.code&&(e.apiKey=t.data.apiKey,e.apiNum=t.data.apiNum,e.apiMin=t.data.apiMin,e.apiTime=t.data.apiTime,t.data.msg&&(e.msg=t.data.msg,e.dialogVisible=!0,setTimeout((function(){e.dialogVisible=!1}),1e3)))}))["catch"]((function(e){console.error("Error updating API key:",e)}))},copyApiKey:function(){var e=this;navigator.clipboard.writeText(this.apiKey).then((function(){e.$message({message:"API Key copied to clipboard!",type:"success",duration:1500})}))["catch"]((function(e){console.error("Failed to copy API key: ",e)}))},checkPhoneBinding:function(){var e=this,t=localStorage.getItem("user_id");this.$http.get("/face/SmsC/".concat(t)).then((function(t){200===t.data.code&&(e.phoneData.phone=t.data.phone,e.phoneData.fid=t.data.fid)}))["catch"]((function(e){console.error("Error checking phone binding:",e)}))},sendCode:function(e){var t=this,i=0;switch(e){case"phone":i=this.phoneCountdown;break}if(!(i>0)){i=60;var o=setInterval((function(){switch(i--,0===i&&clearInterval(o),e){case"phone":t.phoneCountdown=i;break}}),1e3),a="";switch(e){case"phone":a=this.phoneAuthForm.phone;break}this.$http.get("/face/Sms",{params:{phone:a}}).then((function(e){alert(e.data.msg)}))["catch"]((function(e){console.error("Failed to send code:",e)}))}}}},s=n;var r=i(1001),c=(0,r.Z)(s,o,a,!1,null,"1f54743b",null);const l=c.exports}}]);
//# sourceMappingURL=469.25942170.js.map