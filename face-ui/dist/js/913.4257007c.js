"use strict";(self["webpackChunkface_id"]=self["webpackChunkface_id"]||[]).push([[913],{9913:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"face-verification"},[t("h1",{staticClass:"page-title"},[e._v("API在线识别")]),t("hr",{staticClass:"divider"}),t("el-upload",{staticClass:"upload-demo",attrs:{action:e.fakeUploadUrl,"http-request":e.handleUpload,"before-upload":e.beforeUpload,"list-type":"picture-card","file-list":e.fileList,"on-remove":e.handleRemove,limit:2,multiple:""}},[t("i",{staticClass:"el-icon-plus"})]),t("div",{staticClass:"upload-tip"},[e._v("请上传jpg/png文件,单张图片不超过500kb,最多上传两张")]),t("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:e.stepActive,"finish-status":"success",simple:""}},[t("el-step",{attrs:{title:"上传图片"}}),t("el-step",{attrs:{title:"正在识别"}}),t("el-step",{attrs:{title:"识别结果"}})],1),t("div",{staticClass:"button-container"},[t("el-button",{attrs:{disabled:e.submitting||!e.authenticated,type:"primary",round:""},on:{click:e.submitImages}},[e._v("开始识别")])],1),t("div",{staticClass:"message-area"},[e.message?t("el-tag",{staticClass:"message-content",attrs:{type:e.messageType}},[e._v(e._s(e.message))]):e._e()],1),e._m(0)],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"interface-instructions"},[t("h2",[e._v("接口使用说明")]),t("p",[e._v("1.当上传为一张图片时，系统将该图片与存储在人脸库中的数据进行比对，以验证身份(为了确保数据安全,此功能仅支持在线识别模式使用)")]),t("p",[e._v("2.当上传为两张图片时，系统则通过API比较两者特征并计算出相似度以确定是否为同一人(支持使用ApiKey进行接口远程调用)")]),t("p",[e._v("3.当请求完成以后,请务必清空图片上传处的所有图片再进行下一轮的请求,以免导致接口请求数据异常")]),t("p",[e._v("4.用户登录并使用API在线识别功能,不会记录当前用户ApiKey的使用次数和最新使用时间")])])}];s(41539);const n={data:function(){return{fileList:[],imageBase1:"",imageBase2:"",message:"",messageType:"success",submitting:!1,stepActive:0,authenticated:!1,fakeUploadUrl:"https://jsonplaceholder.typicode.com/posts/"}},mounted:function(){this.authForm={fid:localStorage.getItem("user_id")},this.checkAuthentication()},methods:{checkAuthentication:function(){var e=this;this.$http.get("/face/orAuth/".concat(this.authForm.fid)).then((function(t){200===t.data.code?(e.authenticated=!0,e.fetchAuthInfo()):(e.authenticated=!1,e.message="Authentication failed. Please try again later.",e.messageType="error")}))["catch"]((function(t){console.error("未查询到认证信息:",t),e.authenticated=!1,e.message="未查询到认证信息: "+t.message,e.messageType="error"}))},fetchAuthInfo:function(){},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<.5;return t||(this.message="Only JPG/PNG files are allowed!",this.messageType="error"),s||(this.message="File size cannot exceed 500KB!",this.messageType="error"),t&&s&&(this.stepActive=1),t&&s},handleUpload:function(e){var t=this,s=new FileReader;return s.onload=function(e){""===t.imageBase1?t.imageBase1=e.target.result:t.imageBase2=e.target.result},s.readAsDataURL(e.file),!1},handleRemove:function(e,t){this.imageBase1=t.length>0?t[0].url:"",this.imageBase2=t.length>1?t[1].url:""},submitImages:function(){var e=this,t=localStorage.getItem("user_id");if(!this.imageBase1)return this.message="第一张图片不能为空",void(this.messageType="error");if(this.stepActive=2,this.submitting=!0,this.imageBase2){var s=new FormData;s.append("imageBase1",this.imageBase1),s.append("imageBase2",this.imageBase2),this.$http.post("/face/api",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.message=t.data.msg,e.stepActive=3}))["catch"]((function(t){e.message="Error submitting images: "+t.response.data.msg}))["finally"]((function(){e.submitting=!1}))}else{var a=new FormData;a.append("fid",t),a.append("imageBase",this.imageBase1),this.$http.post("/face/vefOne",a,{headers:{"Content-Type":"application/json"}}).then((function(t){e.message=t.data.msg,e.stepActive=3}))["catch"]((function(t){e.message="Error submitting image: "+t.response.data.msg}))["finally"]((function(){e.submitting=!1}))}}}},r=n;var c=s(1001),o=(0,c.Z)(r,a,i,!1,null,"0c4b5bd4",null);const l=o.exports}}]);
//# sourceMappingURL=913.4257007c.js.map