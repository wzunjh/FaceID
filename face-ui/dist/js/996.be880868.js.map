{"version":3,"file":"js/996.be880868.js","mappings":"sIAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,OAAS,cAAc,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,QAAS,IAAO,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,KAAK,UAAY,IAAIC,MAAM,CAACC,MAAON,EAAIO,WAAWC,SAAUC,SAAS,SAAUC,GAAMV,EAAIW,KAAKX,EAAIO,WAAY,WAAYG,EAAK,EAACE,WAAW,0BAA0B,GAAGV,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,kBAAkBS,GAAG,CAAC,MAAQb,EAAIc,cAAc,CAACd,EAAIe,GAAG,SAAS,IAAI,IAAI,IAAI,IAAI,GAAGb,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,UAAU,CAACA,EAAG,YAAY,CAACc,YAAY,CAAC,mBAAmB,YAAY,CAACd,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,+BAA+BS,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAIkB,YAAa,IAAG,CAAClB,EAAIe,GAAG,WAAW,GAAGb,EAAG,WAAW,CAACc,YAAY,CAAC,MAAQ,QAAQZ,MAAM,CAAC,KAAOJ,EAAImB,YAAY,CAACjB,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,SAAS,MAAQ,KAAK,SAAW,MAAMF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,OAAO,MAAQ,QAAQgB,YAAYpB,EAAIqB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACtB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,0BAA0B,KAAO,QAAQS,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAIyB,UAAUD,EAAME,IAAIC,SAAU,IAAG,CAAC3B,EAAIe,GAAG,UAAW,OAAMb,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,WAAW,MAAQ,QAAQF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,OAAOgB,YAAYpB,EAAIqB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACtB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,eAAe,KAAO,QAAQS,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAI4B,WAAWJ,EAAMK,OAAQL,EAAME,IAAK,IAAG,CAAC1B,EAAIe,GAAG,QAAQb,EAAG,gBAAgB,CAACE,MAAM,CAAC,MAAQ,OAASoB,EAAME,IAAIlB,SAAW,WAAWK,GAAG,CAAC,QAAU,SAASI,GAAQ,OAAOjB,EAAI8B,aAAaN,EAAMK,OAAQL,EAAME,IAAK,IAAG,CAACxB,EAAG,YAAY,CAACc,YAAY,CAAC,cAAc,QAAQZ,MAAM,CAAC,KAAO,YAAY,KAAO,iBAAiB,KAAO,OAAO,KAAO,UAAU2B,KAAK,aAAa,CAAC/B,EAAIe,GAAG,SAAS,GAAI,QAAO,IAAI,IAAI,IAAI,GAAGb,EAAG,SAAS,CAAC8B,YAAY,YAAY,CAAC9B,EAAG,gBAAgB,CAAC8B,YAAY,gBAAgB5B,MAAM,CAAC,OAAS,0CAA0C,aAAa,CAAC,EAAG,GAAI,GAAI,IAAI,eAAeJ,EAAIiC,QAAQ,YAAYjC,EAAIkC,KAAK,MAAQlC,EAAImC,OAAOtB,GAAG,CAAC,cAAcb,EAAIoC,iBAAiB,iBAAiBpC,EAAIqC,wBAAwB,GAAGnC,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,OAAO,QAAUJ,EAAIsC,gBAAgB,MAAQ,OAAOzB,GAAG,CAAC,iBAAiB,SAASI,GAAQjB,EAAIsC,gBAAgBrB,CAAO,IAAG,CAACf,EAAG,MAAM,CAACc,YAAY,CAAC,MAAQ,QAAQZ,MAAM,CAAC,IAAMJ,EAAIuC,gBAAgBrC,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQJ,EAAIwC,mBAAmB,QAAUxC,EAAIyC,oBAAoB,eAAezC,EAAI0C,YAAY,MAAQ,SAAS7B,GAAG,CAAC,iBAAiB,SAASI,GAAQjB,EAAIyC,oBAAoBxB,CAAO,IAAG,CAACf,EAAG,UAAU,CAACyC,IAAI,WAAWvC,MAAM,CAAC,MAAQJ,EAAI4C,QAAQ,MAAQ5C,EAAI6C,MAAM,cAAc,SAAS,CAAC3C,EAAG,QAAQ,CAAC4C,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAU1C,MAAON,EAAI4C,QAAQK,IAAKrC,WAAW,gBAAgBR,MAAM,CAAC,KAAO,UAAU8C,SAAS,CAAC,MAASlD,EAAI4C,QAAQK,KAAMpC,GAAG,CAAC,MAAQ,SAASI,GAAWA,EAAOkC,OAAOC,WAAiBpD,EAAIW,KAAKX,EAAI4C,QAAS,MAAO3B,EAAOkC,OAAO7C,MAAO,KAAIJ,EAAG,QAAQ,CAAC4C,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAU1C,MAAON,EAAI4C,QAAQS,OAAQzC,WAAW,mBAAmBR,MAAM,CAAC,KAAO,UAAU8C,SAAS,CAAC,MAASlD,EAAI4C,QAAQS,QAASxC,GAAG,CAAC,MAAQ,SAASI,GAAWA,EAAOkC,OAAOC,WAAiBpD,EAAIW,KAAKX,EAAI4C,QAAS,SAAU3B,EAAOkC,OAAO7C,MAAO,KAAIJ,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,OAAOC,MAAM,CAACC,MAAON,EAAI4C,QAAQpC,SAAUC,SAAS,SAAUC,GAAMV,EAAIW,KAAKX,EAAI4C,QAAS,WAAYlC,EAAK,EAACE,WAAW,uBAAuB,GAAGV,EAAG,eAAe,CAAC8B,YAAY,gBAAgB5B,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACF,EAAG,YAAY,CAAC8B,YAAY,kBAAkB5B,MAAM,CAAC,OAASJ,EAAIsD,cAAc,eAAetD,EAAIuD,aAAa,gBAAgBvD,EAAIwD,aAAa,kBAAiB,EAAM,YAAYxD,EAAIyD,aAAa,MAAQ,EAAE,YAAYzD,EAAI0D,eAAe,CAAE1D,EAAI4C,QAAQjB,SAAUzB,EAAG,MAAM,CAAC8B,YAAY,SAAS5B,MAAM,CAAC,IAAMJ,EAAI4C,QAAQjB,YAAYzB,EAAG,IAAI,CAAC8B,YAAY,yCAAyC,GAAG9B,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWS,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAI2D,WAAW,WAAY,IAAG,CAAC3D,EAAIe,GAAG,UAAUb,EAAG,YAAY,CAACW,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAI4D,UAAU,WAAY,IAAG,CAAC5D,EAAIe,GAAG,SAAS,IAAI,IAAI,IAAI,EACv1I,EACG8C,EAAkB,G,SCsFtB,SACAC,KADA,WAEA,OACA5B,KAAAA,EACAD,QAAAA,EACAE,MAAAA,EACA5B,WAAAA,CACAC,SAAAA,IAEAW,UAAAA,GACAmB,iBAAAA,EACAC,WAAAA,GACAE,qBAAAA,EACAD,mBAAAA,GACAI,QAAAA,CACAK,IAAAA,aAAAA,QAAAA,WACAI,OAAAA,KACA7C,SAAAA,GACAmB,SAAAA,GACAoC,mBAAAA,GAEAlB,MAAAA,CACArC,SAAAA,CACA,CAAAwD,UAAAA,EAAAC,QAAAA,UAAAC,QAAAA,QACA,CAAAC,IAAAA,EAAAC,IAAAA,EAAAH,QAAAA,gBAAAC,QAAAA,SAEAvC,SAAAA,CACA,CAAAqC,UAAAA,EAAAC,QAAAA,cAGAX,cAAAA,8CAEA,EACAe,QAjCA,WAkCA,kBACA,EACAC,QAAAA,CACAf,aADA,SACAgB,GAAA,WACA,wBAEA,0BAGA,+CACA,oBACA,GACA,EACAf,aAXA,SAWAe,GACA,yBAIA,OAHA,GACA,uCAEA,CACA,EACAb,aAlBA,SAkBAc,EAAAC,GACA,kCACA,EACAhB,aArBA,WAsBA,wBACA,EACAiB,gBAxBA,SAwBAH,GACA,kCACA,qBACAI,EAAAA,cAAAA,GACAA,EAAAA,OAAAA,WACAC,EAAAA,EAAAA,OACA,EACAD,EAAAA,QAAAA,SAAAA,GACAE,EAAAA,EACA,CACA,GACA,EACAlB,WApCA,SAoCAmB,GAAA,WACA,oCACA,MAYA,SAXA,yFACA,YACAC,WAAAA,EACAd,QAAAA,EAAAA,KAAAA,IACAe,KAAAA,UACAC,SAAAA,MAEA,gBACA,wBACA,GAIA,GACA,EACArB,UAtDA,SAsDAkB,GACA,4BACA,wBACA,EACArD,UA1DA,SA0DAE,GACA,wBACA,iBACA,EACAb,YA9DA,WA8DA,WACA,GACAmB,QAAAA,KAAAA,QACAC,KAAAA,KAAAA,KACA1B,SAAAA,KAAAA,WAAAA,SACAyC,IAAAA,KAAAA,QAAAA,KAEA,iCAAAiC,OAAAA,IAAA,kBACA,gCACA,0BACA,wBACA,6BACA,GACA,EACA9C,iBA5EA,SA4EA+C,GACA,YACA,kBACA,EACA9C,oBAhFA,SAgFA8C,GACA,eACA,kBACA,EACAzC,YApFA,WAqFA,4BACA,0BACA,EACAxB,WAxFA,WAyFA,0BACA,4BACA,+BACA,wBACA,EACAU,WA9FA,SA8FAwD,EAAA1D,GAAA,WACA,0BACA,4BACA,+BACA,yDACA,sBACA,yBACA,GACA,EACAI,aAvGA,SAuGAsD,EAAA1D,GAAA,WACA,+DACA,YACAqD,WAAAA,EACAd,QAAAA,EAAAA,KAAAA,IACAe,KAAAA,UACAC,SAAAA,MAEA,eACA,GACA,IC7O8P,I,cCQ1PI,GAAY,OACd,EACAtF,EACA8D,GACA,EACA,KACA,KACA,MAIF,QAAewB,EAAiB,O","sources":["webpack://face-id/./src/components/myface/index.vue","webpack://face-id/src/components/myface/index.vue","webpack://face-id/./src/components/myface/index.vue?acf6","webpack://face-id/./src/components/myface/index.vue?a7ad"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{attrs:{\"header\":\"自建人脸信息库列表\"}},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"人脸名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"名称\",\"clearable\":\"\"},model:{value:(_vm.searchFace.faceName),callback:function ($$v) {_vm.$set(_vm.searchFace, \"faceName\", $$v)},expression:\"searchFace.faceName\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getFaceList}},[_vm._v(\"搜索\")])],1)],1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',[_c('el-header',{staticStyle:{\"background-color\":\"#ffffff\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.handleSave()}}},[_vm._v(\"添加人脸\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"width\":\"100\",\"prop\":\"faceId\",\"label\":\"编号\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"width\":\"200\",\"prop\":\"date\",\"label\":\"人脸图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-picture-outline\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.selectImg(scope.row.faceBase)}}},[_vm._v(\"查看人脸\")])]}}])}),_c('el-table-column',{attrs:{\"width\":\"200\",\"prop\":\"faceName\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"230\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_c('el-popconfirm',{attrs:{\"title\":'确认删除' + scope.row.faceName + '的人脸数据吗?'},on:{\"confirm\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-delete\",\"size\":\"mini\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1)],1)],1)],1),_c('el-row',{staticClass:\"page-row\"},[_c('el-pagination',{staticClass:\"el-pagination\",attrs:{\"layout\":\"total, sizes, prev, pager, next, jumper\",\"page-sizes\":[5, 10, 30, 50],\"current-page\":_vm.current,\"page-size\":_vm.size,\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"人脸图片\",\"visible\":_vm.selectImgDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.selectImgDialog=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.currentImg}})]),_c('el-dialog',{attrs:{\"title\":_vm.saveAndUpdateTitle,\"visible\":_vm.saveAndUpdateDialog,\"before-close\":_vm.handleClose,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.saveAndUpdateDialog=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.faceObj,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.faceObj.fid),expression:\"faceObj.fid\"}],attrs:{\"type\":\"hidden\"},domProps:{\"value\":(_vm.faceObj.fid)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.faceObj, \"fid\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.faceObj.faceId),expression:\"faceObj.faceId\"}],attrs:{\"type\":\"hidden\"},domProps:{\"value\":(_vm.faceObj.faceId)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.faceObj, \"faceId\", $event.target.value)}}}),_c('el-form-item',{attrs:{\"label\":\"人脸名称\",\"prop\":\"faceName\"}},[_c('el-input',{attrs:{\"placeholder\":\"必填项\"},model:{value:(_vm.faceObj.faceName),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceName\", $$v)},expression:\"faceObj.faceName\"}})],1),_c('el-form-item',{staticClass:\"login-mid-mid\",attrs:{\"label\":\"人脸数据\",\"prop\":\"faceBase\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.fakeUploadUrl,\"http-request\":_vm.handleUpload,\"before-upload\":_vm.beforeUpload,\"show-file-list\":false,\"on-remove\":_vm.handleRemove,\"limit\":1,\"on-exceed\":_vm.handleExceed}},[(_vm.faceObj.faceBase)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.faceObj.faceBase}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"立即创建\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!--条件搜索区域-->\n    <el-row>\n      <el-col :span=\"24\">\n        <el-card header=\"自建人脸信息库列表\">\n          <el-form :inline=\"true\">\n            <el-form-item label=\"人脸名称\">\n              <el-input v-model=\"searchFace.faceName\" placeholder=\"名称\" clearable></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button icon=\"el-icon-search\" @click=\"getFaceList\">搜索</el-button>\n            </el-form-item>\n          </el-form>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!--数据显示区域-->\n    <el-row>\n      <el-col :span=\"24\">\n        <el-card>\n          <el-header style=\"background-color: #ffffff\">\n            <el-button @click=\"handleSave()\" icon=\"el-icon-circle-plus-outline\">添加人脸</el-button>\n          </el-header>\n          <el-table :data=\"tableData\" style=\"width: 100%\">\n            <el-table-column width=\"100\" prop=\"faceId\" label=\"编号\" sortable></el-table-column>\n            <el-table-column width=\"200\" prop=\"date\" label=\"人脸图片\">\n              <template v-slot:default=\"scope\">\n                <el-button icon=\"el-icon-picture-outline\" size=\"mini\" @click=\"selectImg(scope.row.faceBase)\">查看人脸</el-button>\n              </template>\n            </el-table-column>\n            <el-table-column width=\"200\" prop=\"faceName\" label=\"姓名\"></el-table-column>\n            <el-table-column label=\"操作\" width=\"230\">\n              <template v-slot:default=\"scope\">\n                <el-button icon=\"el-icon-edit\" size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                <el-popconfirm :title=\"'确认删除' + scope.row.faceName + '的人脸数据吗?'\" @confirm=\"handleDelete(scope.$index, scope.row)\">\n                  <el-button style=\"margin-left: 20px\" icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" slot=\"reference\">删除</el-button>\n                </el-popconfirm>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!--分页-->\n    <el-row class=\"page-row\">\n      <el-pagination class=\"el-pagination\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" layout=\"total, sizes, prev, pager, next, jumper\" :page-sizes=\"[5, 10, 30, 50]\" :current-page=\"current\" :page-size=\"size\" :total=\"total\"></el-pagination>\n    </el-row>\n\n    <!--查看人脸图片-->\n    <el-dialog title=\"人脸图片\" :visible.sync=\"selectImgDialog\" width=\"30%\">\n      <img style=\"width: 100%;\" :src=\"currentImg\">\n    </el-dialog>\n\n    <!-- 添加/修改-->\n    <el-dialog :title=\"saveAndUpdateTitle\" :visible.sync=\"saveAndUpdateDialog\" :before-close=\"handleClose\" width=\"600px\">\n      <el-form :model=\"faceObj\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\">\n        <input type=\"hidden\" v-model=\"faceObj.fid\"></input>\n        <input type=\"hidden\" v-model=\"faceObj.faceId\"></input>\n        <el-form-item label=\"人脸名称\" prop=\"faceName\">\n          <el-input placeholder=\"必填项\" v-model=\"faceObj.faceName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"人脸数据\" class=\"login-mid-mid\" prop=\"faceBase\">\n          <el-upload\n              class=\"avatar-uploader\"\n              :action=\"fakeUploadUrl\"\n              :http-request=\"handleUpload\"\n              :before-upload=\"beforeUpload\"\n              :show-file-list=\"false\"\n              :on-remove=\"handleRemove\"\n              :limit=\"1\"\n              :on-exceed=\"handleExceed\">\n            <img v-if=\"faceObj.faceBase\" :src=\"faceObj.faceBase\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\n          <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      size: 5,\n      current: 1,\n      total: 0,\n      searchFace: {\n        faceName: ''\n      },\n      tableData: [],\n      selectImgDialog: false,\n      currentImg: '',\n      saveAndUpdateDialog: false,\n      saveAndUpdateTitle: '',\n      faceObj: {\n        fid: localStorage.getItem('user_id'),\n        faceId: null,\n        faceName: '',\n        faceBase: '',\n        addAndUpdateState: false,\n      },\n      rules: {\n        faceName: [\n          { required: true, message: '请输入人脸名称', trigger: 'blur' },\n          { min: 2, max: 5, message: '长度在 2 到 5 个字符', trigger: 'blur' }\n        ],\n        faceBase: [\n          { required: true, message: '人脸数据不能为空' }\n        ]\n      },\n      fakeUploadUrl: 'https://jsonplaceholder.typicode.com/posts/'\n    }\n  },\n  created() {\n    this.getFaceList();\n  },\n  methods: {\n    handleUpload(file) {\n      if (this.faceObj.faceBase) {\n        // 如果已经有图片,先删除原有的图片\n        this.faceObj.faceBase = '';\n      }\n      // 上传新的图片\n      this.convertToBase64(file.file).then(base64 => {\n        this.faceObj.faceBase = base64;\n      });\n    },\n    beforeUpload(file) {\n      const isLt1M = file.size / 1024 / 1024 < 1;\n      if (!isLt1M) {\n        this.$message.error('上传文件大小不能超过 1MB!');\n      }\n      return isLt1M;\n    },\n    handleExceed(files, fileList) {\n      this.$message.error('只能上传 1 个文件!');\n    },\n    handleRemove() {\n      this.faceObj.faceBase = '';\n    },\n    convertToBase64(file) {\n      return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.readAsDataURL(file);\n        fileReader.onload = () => {\n          resolve(fileReader.result);\n        };\n        fileReader.onerror = (error) => {\n          reject(error);\n        };\n      });\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$http.post(\"/mydb/\" + (this.addAndUpdateState ? 'save' : 'update'), this.faceObj).then(res => {\n            this.$message({\n              showClose: true,\n              message: res.data.msg,\n              type: 'success',\n              duration: 3000\n            })\n            this.getFaceList()\n            this.saveAndUpdateDialog = false\n          })\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n      this.faceObj.faceBase = '';\n    },\n    selectImg(faceBase) {\n      this.selectImgDialog = true\n      this.currentImg = faceBase\n    },\n    getFaceList() {\n      let params = {\n        current: this.current,\n        size: this.size,\n        faceName: this.searchFace.faceName,\n        fid: this.faceObj.fid\n      };\n      this.$http.get('/mydb/faceList', { params }).then(res => {\n        this.tableData = res.data.data.records;\n        this.total = res.data.data.total;\n        this.size = res.data.data.size;\n        this.current = res.data.data.current;\n      });\n    },\n    handleSizeChange(val) {\n      this.size = val\n      this.getFaceList()\n    },\n    handleCurrentChange(val) {\n      this.current = val\n      this.getFaceList()\n    },\n    handleClose() {\n      this.saveAndUpdateDialog = false\n      this.resetForm('ruleForm')\n    },\n    handleSave() {\n      this.addAndUpdateState = true\n      this.saveAndUpdateDialog = true\n      this.saveAndUpdateTitle = '添加人脸'\n      this.faceObj.faceBase = ''\n    },\n    handleEdit(index, row) {\n      this.addAndUpdateState = false\n      this.saveAndUpdateDialog = true\n      this.saveAndUpdateTitle = '修改人脸'\n      this.$http.get(\"/mydb/info/\" + row.faceId).then(res => {\n        this.faceObj = res.data.data\n        this.faceObj.faceId = row.faceId\n      })\n    },\n    handleDelete(index, row) {\n      this.$http.get(\"/mydb/faceDelete/\" + row.faceId).then(res => {\n        this.$message({\n          showClose: true,\n          message: res.data.msg,\n          type: 'success',\n          duration: 3000\n        })\n        this.getFaceList();\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3c7a0841&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3c7a0841&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","model","value","searchFace","faceName","callback","$$v","$set","expression","on","getFaceList","_v","staticStyle","$event","handleSave","tableData","scopedSlots","_u","key","fn","scope","selectImg","row","faceBase","handleEdit","$index","handleDelete","slot","staticClass","current","size","total","handleSizeChange","handleCurrentChange","selectImgDialog","currentImg","saveAndUpdateTitle","saveAndUpdateDialog","handleClose","ref","faceObj","rules","directives","name","rawName","fid","domProps","target","composing","faceId","fakeUploadUrl","handleUpload","beforeUpload","handleRemove","handleExceed","submitForm","resetForm","staticRenderFns","data","addAndUpdateState","required","message","trigger","min","max","created","methods","file","files","fileList","convertToBase64","fileReader","resolve","reject","formName","showClose","type","duration","params","val","index","component"],"sourceRoot":""}