{"version":3,"file":"js/814.059050a3.js","mappings":"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","sources":["webpack://face-id/./src/components/face/index.vue","webpack://face-id/src/components/face/index.vue","webpack://face-id/./src/components/face/index.vue?4ce9","webpack://face-id/./src/components/face/index.vue?50e3"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{attrs:{\"header\":\"我的登录人脸信息\"}},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"人脸名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"名称\",\"clearable\":\"\"},model:{value:(_vm.searchFace.faceName),callback:function ($$v) {_vm.$set(_vm.searchFace, \"faceName\", $$v)},expression:\"searchFace.faceName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"人脸状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.searchFace.faceStatus),callback:function ($$v) {_vm.$set(_vm.searchFace, \"faceStatus\", $$v)},expression:\"searchFace.faceStatus\"}},[_c('el-option',{attrs:{\"label\":\"不限\",\"value\":\"\"}}),_c('el-option',{attrs:{\"label\":\"启用\",\"value\":\"0\"}}),_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"1\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getFaceList}},[_vm._v(\"搜索\")])],1)],1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',[_c('el-header',{staticStyle:{\"background-color\":\"#ffffff\"}},[(_vm.isSuperUser)?_c('el-button',{attrs:{\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.handleSave()}}},[_vm._v(\"添加人脸\")]):_vm._e()],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"width\":\"100\",\"prop\":\"fid\",\"label\":\"编号\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"width\":\"150\",\"prop\":\"date\",\"label\":\"人脸图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-picture-outline\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.selectImg(scope.row.faceBase)}}},[_vm._v(\"查看人脸\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\",\"width\":\"200\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"vefNum\",\"label\":\"登录验证次数\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"faceName\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"apiMin\",\"label\":\"API次数/Min\"}}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"备注\"}}),_c('el-table-column',{attrs:{\"prop\":\"faceStatus\",\"label\":\"是否启用\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"value\":scope.row.faceStatus === 0,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"230\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_c('el-popconfirm',{attrs:{\"title\":'确认删除' + scope.row.faceName + '的人脸数据吗?'},on:{\"confirm\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[(_vm.isSuperUser)?_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-delete\",\"size\":\"mini\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")]):_vm._e()],1)]}}])})],1)],1)],1)],1),_c('el-row',{staticClass:\"page-row\"},[_c('el-pagination',{staticClass:\"el-pagination\",attrs:{\"layout\":\"total, sizes, prev, pager, next, jumper\",\"page-sizes\":[5, 10, 30, 50],\"current-page\":_vm.current,\"page-size\":_vm.size,\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"人脸图片\",\"visible\":_vm.selectImgDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.selectImgDialog=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.currentImg}})]),_c('el-dialog',{attrs:{\"title\":_vm.saveAndUpdateTitle,\"visible\":_vm.saveAndUpdateDialog,\"before-close\":_vm.handleClose,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.saveAndUpdateDialog=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.faceObj,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.faceObj.fid),expression:\"faceObj.fid\"}],attrs:{\"type\":\"hidden\"},domProps:{\"value\":(_vm.faceObj.fid)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.faceObj, \"fid\", $event.target.value)}}}),_c('el-form-item',{attrs:{\"label\":\"人脸名称\",\"prop\":\"faceName\"}},[_c('el-input',{attrs:{\"placeholder\":\"必填项\"},model:{value:(_vm.faceObj.faceName),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceName\", $$v)},expression:\"faceObj.faceName\"}})],1),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{\"label\":\"人脸状态\",\"prop\":\"faceStatus\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.faceObj.faceStatus),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceStatus\", $$v)},expression:\"faceObj.faceStatus\"}},[_c('el-option',{attrs:{\"label\":\"启用\",\"value\":0}}),_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":1}})],1)],1),_c('el-form-item',{staticClass:\"login-mid-mid\",attrs:{\"label\":\"人脸数据\",\"prop\":\"faceBase\"}},[_c('div',{staticClass:\"savevideoCamera-canvasCamera\"},[_c('video',{attrs:{\"id\":\"videoCamera2\",\"width\":_vm.videoWidth,\"height\":_vm.videoHeight,\"autoplay\":\"\"}}),_c('canvas',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"canvasCamera2\",\"width\":_vm.videoWidth,\"height\":_vm.videoHeight}}),(_vm.faceImgState)?_c('div',{staticClass:\"saveface-special-effects-2\"}):_c('div',{staticClass:\"saveface-special-effects\"}),_c('el-input',{attrs:{\"type\":\"hidden\"},model:{value:(_vm.faceObj.faceBase),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceBase\", $$v)},expression:\"faceObj.faceBase\"}})],1),_c('div',{staticClass:\"savefaceBase\",attrs:{\"id\":\"faceBase\"}}),(_vm.cameraState)?_c('div',{staticClass:\"saveface-btn\"},[_c('el-button',{on:{\"click\":_vm.enteringFace}},[_vm._v(_vm._s(_vm.faceObj.faceBase === '' ? '录入人脸' : '重新录入'))])],1):_c('div',{staticClass:\"saveface-btn\"},[_c('el-button',[_vm._v(\"摄像头正在加载...\")])],1)]),_c('el-form-item',{attrs:{\"label\":\"次数/分钟\"}},[_c('el-input',{attrs:{\"placeholder\":\"必填\",\"type\":\"textarea\"},model:{value:(_vm.faceObj.apiMin),callback:function ($$v) {_vm.$set(_vm.faceObj, \"apiMin\", $$v)},expression:\"faceObj.apiMin\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"placeholder\":\"非必填\",\"type\":\"textarea\"},model:{value:(_vm.faceObj.remark),callback:function ($$v) {_vm.$set(_vm.faceObj, \"remark\", $$v)},expression:\"faceObj.remark\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"立即创建\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n\n    <!--条件搜索区域-->\n    <el-row>\n      <el-col :span=\"24\">\n        <el-card header=\"我的登录人脸信息\">\n          <el-form :inline=\"true\">\n            <el-form-item label=\"人脸名称\">\n              <el-input v-model=\"searchFace.faceName\" placeholder=\"名称\" clearable></el-input>\n            </el-form-item>\n            <el-form-item label=\"人脸状态\">\n              <el-select v-model=\"searchFace.faceStatus\" placeholder=\"请选择\">\n                <el-option label=\"不限\" value=\"\"></el-option>\n                <el-option label=\"启用\" value=\"0\"></el-option>\n                <el-option label=\"禁用\" value=\"1\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button icon=\"el-icon-search\" @click=\"getFaceList\">搜索</el-button>\n            </el-form-item>\n          </el-form>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!--数据显示区域-->\n    <el-row>\n      <el-col :span=\"24\">\n        <el-card>\n          <el-header style=\"background-color: #ffffff\">\n            <el-button @click=\"handleSave()\" icon=\"el-icon-circle-plus-outline\" v-if=\"isSuperUser\">添加人脸</el-button>\n          </el-header>\n          <el-table :data=\"tableData\" style=\"width: 100%\">\n            <el-table-column width=\"100\" prop=\"fid\" label=\"编号\" sortable></el-table-column>\n            <el-table-column width=\"150\" prop=\"date\" label=\"人脸图片\">\n              <template v-slot:default=\"scope\">\n                <el-button icon=\"el-icon-picture-outline\" size=\"mini\" @click=\"selectImg(scope.row.faceBase)\">查看人脸</el-button>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"200\" sortable></el-table-column>\n            <el-table-column prop=\"vefNum\" label=\"登录验证次数\" sortable></el-table-column>\n            <el-table-column prop=\"faceName\" label=\"姓名\"></el-table-column>\n            <el-table-column prop=\"apiMin\" label=\"API次数/Min\"></el-table-column>\n            <el-table-column prop=\"remark\" label=\"备注\"></el-table-column>\n            <el-table-column prop=\"faceStatus\" label=\"是否启用\" sortable>\n              <template v-slot:default=\"scope\">\n                <el-switch :value=\"scope.row.faceStatus === 0\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"230\">\n              <template v-slot:default=\"scope\">\n                <el-button icon=\"el-icon-edit\" size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                <el-popconfirm :title=\"'确认删除' + scope.row.faceName + '的人脸数据吗?'\" @confirm=\"handleDelete(scope.$index, scope.row)\">\n                  <el-button style=\"margin-left: 20px\" icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" slot=\"reference\" v-if=\"isSuperUser\">删除</el-button>\n                </el-popconfirm>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!--分页-->\n    <el-row class=\"page-row\">\n      <el-pagination class=\"el-pagination\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" layout=\"total, sizes, prev, pager, next, jumper\" :page-sizes=\"[5, 10, 30, 50]\" :current-page=\"current\" :page-size=\"size\" :total=\"total\"></el-pagination>\n    </el-row>\n\n    <!--查看人脸图片-->\n    <el-dialog title=\"人脸图片\" :visible.sync=\"selectImgDialog\" width=\"30%\">\n      <img style=\"width: 100%;\" :src=\"currentImg\">\n    </el-dialog>\n\n    <!-- 添加/修改-->\n    <el-dialog :title=\"saveAndUpdateTitle\" :visible.sync=\"saveAndUpdateDialog\" :before-close=\"handleClose\" width=\"600px\">\n      <el-form :model=\"faceObj\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\">\n        <input type=\"hidden\" v-model=\"faceObj.fid\"></input>\n        <el-form-item label=\"人脸名称\" prop=\"faceName\">\n          <el-input placeholder=\"必填项\" v-model=\"faceObj.faceName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"人脸状态\" style=\"margin-bottom: 30px\" prop=\"faceStatus\">\n          <el-select style=\"width: 100%;\" v-model=\"faceObj.faceStatus\" placeholder=\"请选择\">\n            <el-option label=\"启用\" :value=\"0\"></el-option>\n            <el-option label=\"禁用\" :value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"人脸数据\" class=\"login-mid-mid\" prop=\"faceBase\">\n          <!--捕获人脸区域-->\n          <div class=\"savevideoCamera-canvasCamera \">\n            <video id=\"videoCamera2\" :width=\"videoWidth\" :height=\"videoHeight\" autoplay></video>\n            <canvas style=\"display: none\" id=\"canvasCamera2\" :width=\"videoWidth\" :height=\"videoHeight\"></canvas>\n            <!--人脸特效区域-->\n            <div v-if=\"faceImgState\" class=\"saveface-special-effects-2\"></div>\n            <div v-else class=\"saveface-special-effects\"></div>\n            <el-input type=\"hidden\" v-model=\"faceObj.faceBase\"></el-input>\n          </div>\n          <!--拍照显示区域-->\n          <div class=\"savefaceBase\" id=\"faceBase\"></div>\n          <!--按钮区域-->\n          <div class=\"saveface-btn\" v-if=\"cameraState\">\n            <el-button @click=\"enteringFace\">{{faceObj.faceBase === '' ? '录入人脸' : '重新录入'}}</el-button>\n          </div>\n          <div class=\"saveface-btn\" v-else>\n            <el-button>摄像头正在加载...</el-button>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"次数/分钟\">\n          <el-input placeholder=\"必填\" type=\"textarea\" v-model=\"faceObj.apiMin\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input placeholder=\"非必填\" type=\"textarea\" v-model=\"faceObj.remark\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\n          <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport $camera from \"../../camera/index.js\";\n\nexport default {\n  data() {\n    return {\n      size: 5,\n      current: 1,\n      total: 0,\n      videoWidth: 200,\n      videoHeight: 200,\n      faceImgState: false,\n      searchFace: {\n        faceName: '',\n        faceStatus: ''\n      },\n      tableData: [],\n      selectImgDialog: false,\n      currentImg: '',\n      saveAndUpdateDialog: false,\n      saveAndUpdateTitle: '',\n      faceObj: {\n        fid: null,\n        faceName: '',\n        faceBase: '',\n        faceStatus: 0,\n        remark: '',\n        apiMin: 5,\n        addAndUpdateState: false,\n      },\n      rules: {\n        faceName: [\n          { required: true, message: '请输入人脸名称', trigger: 'blur' },\n          { min: 2, max: 5, message: '长度在 2 到 5 个字符', trigger: 'blur' }\n        ],\n        faceBase: [\n          { required: true, message: '人脸数据不能为空' }\n        ]\n      },\n      faceOption: {},\n      cameraState: false,\n      currentUserFid: null // Store current user fid\n    }\n  },\n  computed: {\n    isSuperUser() {\n      return this.currentUserFid === 1;\n    }\n  },\n  watch:{\n    saveAndUpdateDialog:{\n      handler(newValue, oldValue){\n        // 监听弹出层 设置摄像头是否开启\n        if (newValue){\n          // 延迟加载 不然document.getElementById找不到\n          setTimeout(()=>{\n            // 开启摄像头\n            this.faceOption = $camera.getCamera({\n              videoWidth: 200,\n              videoHeight: 200,\n              thisCancas: null,\n              thisContext: null,\n              thisVideo: null,\n              canvasId:'canvasCamera2',\n              videoId:'videoCamera2'\n            });\n          },1000)\n        }else {\n          let faceBase = document.getElementById(\"faceBase\");\n          faceBase.innerHTML= \"\"\n          if(this.faceOption.thisVideo != null){\n            // 不等于null 关闭摄像头\n            this.faceOption.thisVideo.srcObject.getTracks()[0].stop();\n          }\n        }\n      }\n    }\n  },\n\n  created() {\n    this.currentUserFid = parseInt(localStorage.getItem(\"user_id\"));\n    this.getFaceList();\n  },\n  methods: {\n    enteringFace() {\n      this.faceObj.faceBase = $camera.draw(this.faceOption)\n      let faceBase = document.getElementById(\"faceBase\");\n      faceBase.innerHTML = \"<img src='\" + this.faceObj.faceBase + \"' />\"\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$http.post(\"/face/\" + (this.addAndUpdateState ? 'save' : 'update'), this.faceObj).then(res => {\n            this.$message({\n              showClose: true,\n              message: res.data.msg,\n              type: 'success',\n              duration: 3000\n            })\n            this.getFaceList()\n            this.saveAndUpdateDialog = false\n          })\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      let faceBase = document.getElementById(\"faceBase\");\n      faceBase.innerHTML = \"\"\n      this.$refs[formName].resetFields();\n    },\n    selectImg(faceBase) {\n      this.selectImgDialog = true\n      this.currentImg = faceBase\n    },\n    getFaceList() {\n      let params = {\n        current: this.current,\n        size: this.size,\n        faceName: this.searchFace.faceName,\n        faceStatus: this.searchFace.faceStatus\n      };\n      this.$http.get('/face/faceList', { params }).then(res => {\n        let records = res.data.data.records;\n        // 如果 currentUserFid 不是 1，过滤数据\n        if (this.currentUserFid !== 1) {\n          records = records.filter(record => record.fid === this.currentUserFid);\n          this.total = records.length;  // 更新总条目数，因为只显示一条\n        } else {\n          this.total = res.data.data.total;  // 使用服务器返回的总条目数\n        }\n        this.tableData = records;\n        this.size = res.data.data.size;\n        this.current = res.data.data.current;\n      });\n    },\n    handleSizeChange(val) {\n      this.size = val\n      this.getFaceList()\n    },\n    handleCurrentChange(val) {\n      this.current = val\n      this.getFaceList()\n    },\n    handleClose() {\n      this.saveAndUpdateDialog = false\n      this.cameraState = false\n      this.resetForm('ruleForm')\n    },\n    setCameraState() {\n      setTimeout(() => {\n        this.cameraState = true\n      }, 1500)\n    },\n    handleSave() {\n      this.setCameraState()\n      this.addAndUpdateState = true\n      this.saveAndUpdateDialog = true\n      this.saveAndUpdateTitle = '添加人脸'\n    },\n    handleEdit(index, row) {\n      this.setCameraState()\n      this.addAndUpdateState = false\n      this.saveAndUpdateDialog = true\n      this.saveAndUpdateTitle = '修改人脸'\n      this.$http.get(\"/face/info/\" + row.fid).then(res => {\n        this.faceObj = res.data.data\n        let faceBase = document.getElementById(\"faceBase\");\n        faceBase.innerHTML = \"<img src='\" + this.faceObj.faceBase + \"' />\"\n      })\n    },\n    handleDelete(index, row) {\n      this.$http.get(\"/face/faceDelete/\" + row.fid).then(res => {\n        this.getFaceList();\n        this.$message.success(res.data.msg)\n      })\n    }\n  }\n}\n</script>\n\n<style>\n@import \"./index.css\";\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=737ee1a4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=737ee1a4&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","model","value","searchFace","faceName","callback","$$v","$set","expression","faceStatus","on","getFaceList","_v","staticStyle","isSuperUser","$event","handleSave","_e","tableData","scopedSlots","_u","key","fn","scope","selectImg","row","faceBase","handleEdit","$index","handleDelete","slot","staticClass","current","size","total","handleSizeChange","handleCurrentChange","selectImgDialog","currentImg","saveAndUpdateTitle","saveAndUpdateDialog","handleClose","ref","faceObj","rules","directives","name","rawName","fid","domProps","target","composing","videoWidth","videoHeight","faceImgState","cameraState","enteringFace","_s","apiMin","remark","submitForm","resetForm","staticRenderFns","data","addAndUpdateState","required","message","trigger","min","max","faceOption","currentUserFid","computed","watch","handler","newValue","oldValue","setTimeout","thisCancas","thisContext","thisVideo","canvasId","videoId","created","methods","formName","showClose","type","duration","params","records","val","setCameraState","index","component"],"sourceRoot":""}