"use strict";(self["webpackChunkface_id"]=self["webpackChunkface_id"]||[]).push([[596],{95596:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("el-descriptions",{attrs:{title:"用户 IP 登录安全中心",border:""}},[e("el-descriptions-item",{attrs:{label:"用户ID"}},[t._v(t._s(t.userId))]),e("el-descriptions-item",{attrs:{label:"当前登录IP地址"}},[t._v(t._s(t.ip))]),e("el-descriptions-item",{attrs:{label:"IP白名单"}},[e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("ul",t._l(t.ipList,(function(i){return e("li",{key:i},[t._v(t._s(i))])})),0),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showEditDialog=!0}}},[t._v("修改IP白名单")])],1)])],1)],1),e("el-dialog",{attrs:{title:"修改IP白名单",visible:t.showEditDialog},on:{"update:visible":function(e){t.showEditDialog=e}}},[e("el-input",{attrs:{placeholder:"请输入IP白名单,多个IP以英文逗号分隔"},model:{value:t.newIpList,callback:function(e){t.newIpList=e},expression:"newIpList"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showEditDialog=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.updateIpList}},[t._v("确 认")])],1)],1)],1)},o=[];i(74916),i(23123),i(92222);const r={data:function(){return{userId:null,ip:"",ipList:[],showEditDialog:!1,newIpList:""}},mounted:function(){this.fetchIpInfo()},methods:{fetchIpInfo:function(){var t=this,e=localStorage.getItem("user_id");e?(this.userId=e,this.$http.get("/face/ip/".concat(e)).then((function(e){var i=e.data;200===i.code?(t.ip=i.ip,t.ipList=i.ipList.split(",")||[]):t.$message.error("获取IP信息失败")}))["catch"]((function(e){console.error("Error fetching IP information:",e),t.$message.error("获取IP信息失败")}))):this.$message.error("用户ID未找到")},updateIpList:function(){var t=this,e=this.userId;e?this.$http.get("/face/SetIP?fid=".concat(e,"&ipList=").concat(this.newIpList)).then((function(e){var i=e.data;200===i.code?(t.ipList=i.ipList.split(","),t.$message.success("IP白名单更新成功"),t.showEditDialog=!1):t.$message.error(i.msg||"更新IP白名单失败")}))["catch"]((function(e){console.error("Error updating IP whitelist:",e),t.$message.error("更新IP白名单失败")})):this.$message.error("用户ID未找到")}}},n=r;var a=i(1001),l=(0,a.Z)(n,s,o,!1,null,null,null);const c=l.exports}}]);
//# sourceMappingURL=596.10615ba1.js.map