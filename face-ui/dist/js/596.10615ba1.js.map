{"version":3,"file":"js/596.10615ba1.js","mappings":"sIAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,UAAU,CAACA,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,eAAe,OAAS,KAAK,CAACF,EAAG,uBAAuB,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,WAAWL,EAAG,uBAAuB,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACJ,EAAIK,GAAGL,EAAIM,GAAGN,EAAIQ,OAAON,EAAG,uBAAuB,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACF,EAAG,MAAM,CAACO,YAAY,CAAC,QAAU,OAAO,kBAAkB,gBAAgB,cAAc,WAAW,CAACP,EAAG,KAAKF,EAAIU,GAAIV,EAAIW,QAAQ,SAASH,GAAI,OAAON,EAAG,KAAK,CAACU,IAAIJ,GAAI,CAACR,EAAIK,GAAGL,EAAIM,GAAGE,KAAO,IAAE,GAAGN,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWS,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIe,gBAAiB,CAAK,IAAG,CAACf,EAAIK,GAAG,cAAc,MAAM,IAAI,GAAGH,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,UAAU,QAAUJ,EAAIe,gBAAgBF,GAAG,CAAC,iBAAiB,SAASC,GAAQd,EAAIe,eAAeD,CAAO,IAAG,CAACZ,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,wBAAwBY,MAAM,CAACC,MAAOjB,EAAIkB,UAAWC,SAAS,SAAUC,GAAMpB,EAAIkB,UAAUE,CAAI,EAACC,WAAW,eAAenB,EAAG,OAAO,CAACoB,YAAY,gBAAgBlB,MAAM,CAAC,KAAO,UAAUmB,KAAK,UAAU,CAACrB,EAAG,YAAY,CAACW,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIe,gBAAiB,CAAM,IAAG,CAACf,EAAIK,GAAG,SAASH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWS,GAAG,CAAC,MAAQb,EAAIwB,eAAe,CAACxB,EAAIK,GAAG,UAAU,IAAI,IAAI,EACjvC,EACGoB,EAAkB,G,2BCyBtB,SACAC,KADA,WAEA,OACAnB,OAAAA,KACAC,GAAAA,GACAG,OAAAA,GACAI,gBAAAA,EACAG,UAAAA,GAEA,EACAS,QAVA,WAWA,kBACA,EACAC,QAAAA,CACAC,YADA,WACA,WACA,kCACA,GACA,cACA,wDACA,aACA,cACA,UACA,kCAEA,4BAEA,IARA,UAQA,YACAC,QAAAA,MAAAA,iCAAAA,GACA,4BACA,KAEA,8BAEA,EACAN,aArBA,WAqBA,WACA,cACA,EAIA,iGACA,aACA,cACA,6BACA,gCACA,qBAEA,oCAEA,IATA,UASA,YACAM,QAAAA,MAAAA,+BAAAA,GACA,6BACA,IAfA,8BAgBA,IChF8P,I,cCO1PC,GAAY,OACd,EACAhC,EACA0B,GACA,EACA,KACA,KACA,MAIF,QAAeM,EAAiB,O","sources":["webpack://face-id/./src/components/ipList/index.vue","webpack://face-id/src/components/ipList/index.vue","webpack://face-id/./src/components/ipList/index.vue?824e","webpack://face-id/./src/components/ipList/index.vue?5f39"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-card',[_c('el-descriptions',{attrs:{\"title\":\"用户 IP 登录安全中心\",\"border\":\"\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户ID\"}},[_vm._v(_vm._s(_vm.userId))]),_c('el-descriptions-item',{attrs:{\"label\":\"当前登录IP地址\"}},[_vm._v(_vm._s(_vm.ip))]),_c('el-descriptions-item',{attrs:{\"label\":\"IP白名单\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\"}},[_c('ul',_vm._l((_vm.ipList),function(ip){return _c('li',{key:ip},[_vm._v(_vm._s(ip))])}),0),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showEditDialog = true}}},[_vm._v(\"修改IP白名单\")])],1)])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改IP白名单\",\"visible\":_vm.showEditDialog},on:{\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-input',{attrs:{\"placeholder\":\"请输入IP白名单,多个IP以英文逗号分隔\"},model:{value:(_vm.newIpList),callback:function ($$v) {_vm.newIpList=$$v},expression:\"newIpList\"}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showEditDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateIpList}},[_vm._v(\"确 认\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card>\r\n      <el-descriptions title=\"用户 IP 登录安全中心\" border>\r\n        <el-descriptions-item label=\"用户ID\">{{ userId }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"当前登录IP地址\">{{ ip }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"IP白名单\">\r\n          <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n            <ul>\r\n              <li v-for=\"ip in ipList\" :key=\"ip\">{{ ip }}</li>\r\n            </ul>\r\n            <el-button type=\"primary\" @click=\"showEditDialog = true\">修改IP白名单</el-button>\r\n          </div>\r\n        </el-descriptions-item>\r\n      </el-descriptions>\r\n    </el-card>\r\n    <el-dialog title=\"修改IP白名单\" :visible.sync=\"showEditDialog\">\r\n      <el-input v-model=\"newIpList\" placeholder=\"请输入IP白名单,多个IP以英文逗号分隔\"></el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showEditDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateIpList\">确 认</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      userId: null,\r\n      ip: '',\r\n      ipList: [],\r\n      showEditDialog: false,\r\n      newIpList: ''\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchIpInfo();\r\n  },\r\n  methods: {\r\n    fetchIpInfo() {\r\n      const fid = localStorage.getItem('user_id');\r\n      if (fid) {\r\n        this.userId = fid;\r\n        this.$http.get(`/face/ip/${fid}`).then(response => {\r\n          const data = response.data;\r\n          if (data.code === 200) {\r\n            this.ip = data.ip;\r\n            this.ipList = data.ipList.split(',') || [];\r\n          } else {\r\n            this.$message.error('获取IP信息失败');\r\n          }\r\n        }).catch(error => {\r\n          console.error('Error fetching IP information:', error);\r\n          this.$message.error('获取IP信息失败');\r\n        });\r\n      } else {\r\n        this.$message.error('用户ID未找到');\r\n      }\r\n    },\r\n    updateIpList() {\r\n      const fid = this.userId;\r\n      if (!fid) {\r\n        this.$message.error('用户ID未找到');\r\n        return;\r\n      }\r\n      this.$http.get(`/face/SetIP?fid=${fid}&ipList=${this.newIpList}`).then(response => {\r\n        const data = response.data;\r\n        if (data.code === 200) {\r\n          this.ipList = data.ipList.split(',');\r\n          this.$message.success('IP白名单更新成功');\r\n          this.showEditDialog = false;\r\n        } else {\r\n          this.$message.error(data.msg || '更新IP白名单失败');\r\n        }\r\n      }).catch(error => {\r\n        console.error('Error updating IP whitelist:', error);\r\n        this.$message.error('更新IP白名单失败');\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b2b60260&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","_v","_s","userId","ip","staticStyle","_l","ipList","key","on","$event","showEditDialog","model","value","newIpList","callback","$$v","expression","staticClass","slot","updateIpList","staticRenderFns","data","mounted","methods","fetchIpInfo","console","component"],"sourceRoot":""}