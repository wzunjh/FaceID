"use strict";(self["webpackChunkface_id"]=self["webpackChunkface_id"]||[]).push([[25],{33025:(t,e,n)=>{n.r(e),n.d(e,{default:()=>d});n(74916),n(23123);var o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("h1",{staticStyle:{"font-size":"48px"}},[t._v("OTP Generator")]),t.error?e("p",{staticStyle:{"font-size":"24px"}},[t._v(t._s(t.error))]):t.isAuthenticated?e("div",{staticClass:"otp-container"},[e("div",{staticClass:"otp-digits"},t._l(t.otp.split(""),(function(n){return e("div",{key:n,staticClass:"otp-digit",staticStyle:{"font-size":"48px",width:"80px",height:"80px","line-height":"80px"}},[t._v(t._s(n))])})),0),e("div",{staticClass:"countdown"},[e("el-progress",{attrs:{percentage:t.expirationSeconds/30*100,"show-text":!1,"stroke-width":24,color:"#67C23A"}}),e("div",{staticClass:"countdown-text",staticStyle:{"font-size":"24px","font-weight":"bold",color:"#67C23A"}},[t._v("剩余有效时间: "+t._s(t.expirationSeconds)+" seconds")])],1)]):e("div",{staticStyle:{"font-size":"24px"}},[t._v("未认证,无法使用 OTP")])])},i=[],s=(n(32564),n(56265),n(8499));const r={name:"OtpPage",components:{"el-progress":s.Progress},data:function(){return{otp:"",expirationSeconds:0,intervalId:null,error:null,isAuthenticated:!1}},mounted:function(){this.checkAuthentication(),this.fetchOtp(),this.intervalId=setInterval(this.fetchOtp,1e3)},beforeDestroy:function(){clearInterval(this.intervalId)},methods:{checkAuthentication:function(){var t=this,e=localStorage.getItem("user_id");this.$http.get("/face/orAuth/".concat(e)).then((function(e){t.isAuthenticated=200===e.data.code}))["catch"]((function(e){console.error(e),t.error=e.response.data.msg}))},fetchOtp:function(){var t=this,e=localStorage.getItem("user_id");this.$http.get("/mfa/otp/".concat(e),{params:{}}).then((function(e){t.otp=e.data.otp,t.expirationSeconds=e.data.expirationSeconds,t.error=null}))["catch"]((function(e){console.error(e),t.error=e.response.data.msg}))}}},a=r;var c=n(1001),l=(0,c.Z)(a,o,i,!1,null,null,null);const d=l.exports}}]);
//# sourceMappingURL=25.8ed7d1b1.js.map